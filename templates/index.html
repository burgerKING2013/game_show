<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Game Show - Choose Player</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; background: #f4f4f4; }
    h1 { color: #333; margin-top: 50px; }
    .buttons { display: flex; justify-content: center; gap: 50px; margin-top: 50px; }
    .player { border: 2px solid #333; padding: 30px; background: #fff; border-radius: 15px; }
    button { font-size: 20px; padding: 15px 40px; margin: 10px; cursor: pointer; border-radius: 10px; }
    .green { background: seagreen; color: white; }
    .red { background: crimson; color: white; }
    .scoreboard { margin-top: 30px; font-size: 20px; }
    .reset-btn { margin-top: 20px; background: #555; color: white; border-radius: 10px; padding: 10px 20px; cursor: pointer; }
  </style>
</head>
<body>

<h1>Game Show</h1>

<div class="buttons">
  <div class="player">
    <h2>Player 1</h2>
    <a href="/p1"><button class="green">Enter</button></a>
  </div>
  <div class="player">
    <h2>Player 2</h2>
    <a href="/p2"><button class="green">Enter</button></a>
  </div>
</div>

<div class="scoreboard">
  <p>Round: <span id="round">0</span></p>
  <p>Player 1 Score: <span id="score1">0</span></p>
  <p>Player 2 Score: <span id="score2">0</span></p>
  <p>Last Choices: <span id="choices">-</span></p>
</div>

<button class="reset-btn" onclick="resetRound()">Reset Round</button>

<script>
async function updateStatus() {
  let res = await fetch('/status');
  let data = await res.json();
  document.getElementById("score1").innerText = data.s1;
  document.getElementById("score2").innerText = data.s2;
  document.getElementById("round").innerText = data.round;
  if(data.ok){
    document.getElementById("choices").innerText = 
      `Player 1: ${data.last_choice1}, Player 2: ${data.last_choice2}`;
  } else {
    document.getElementById("choices").innerText = '-';
  }
}

function resetRound() {
  fetch('/reset', { method: 'POST' });
}

setInterval(updateStatus, 500);
updateStatus();
</script>

</body>
</html>
